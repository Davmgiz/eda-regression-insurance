# Анализ страховых расходов — EDA & OLS

**Jupyter‑ноутбук:** `Сузанов_Итоговая.ipynb`

Краткий отчёт о разведочном анализе, проверке гипотез и построении линейной модели медицинских страховых затрат.

## Датасет

*Medical Cost Personal Dataset* (Kaggle) — 1 338 наблюдений, 7 признаков.
Основные поля:

* `age` — возраст страхователя
* `sex` — пол
* `bmi` — индекс массы тела
* `children` — число детей
* `smoker` — факт курения
* `region` — регион проживания (NE, SE, SW, NW)
* `charges` — ежегодные страховые выплаты (целевая переменная)


## Структура репозитория

| Путь                     | Содержимое                                               |
| ------------------------ | -------------------------------------------------------- |
| `Сузанов_Итоговая.ipynb` | Основной ноутбук, воспроизводится **Run All** без ошибок |
| `Сузанов_Итоговая.html`  | Экспорт ноутбука для быстрого просмотра                  |
| `data/insurance.csv`     | Датасет (скачивается автоматически, если файла нет)      |
| `images/`                | PNG‑графики, генерируемые ноутбуком                      |
| `requirements.txt`       | Зависимости (pandas, numpy, statsmodels, plotly, etc.)   |


## Ход исследования

1. **EDA**

   * Изучены распределения числовых и категориальных признаков.
   * Сегментация по `smoker`, квантилям `bmi`, регионам — ≥ 3 когорт.
   * Сравнение когорт: PSI, KS‑тесты, интерактивные box / density‑plot’ы (Plotly).
2. **Тестирование гипотез**

   * Проверено 6 продуктовых гипотез (пример: *курильщики тратят больше*).
   * t‑test / Mann‑Whitney + bootstrap‑95 % CI.
   * Предложены А/В‑эксперименты для отстающих сегментов.
3. **Регрессионный анализ**

   * Построено 4 спецификации OLS.
   * Диагностика: Breusch–Pagan (гетероскедастичность), VIF (мультиколлинеарность), Durbin–Watson, Jarque–Bera.
   * Корректирующие действия: robust‑SE, взаимодействия `bmi ✕ smoker`, исключение `age`.
   * **Финальная модель**

     ```
     charges ~ smoker + bmi + bmi:smoker + children + region + sex
     R² = 0.868 • Adj R² = 0.866 • AIC = 26 270 • BIC = 26 330
     ```
4. **Визуализация**

   * ≥ 1 графика на каждый шаг (всего 15): heatmap корреляций, инт. boxplot’ы, QQ‑plot остатков, влияние точек (Cook’s distance) и др.
   * Все графики подписаны и снабжены краткими выводами.


## Ключевые выводы

* **Курение** повышает ожидаемые выплаты на **≈ 23 800 \$** (CI 95 %: 21 900 — 25 700).
* **BMI**: +320 \$ к расходам за каждую доп. единицу; для курильщиков эффект усиливается до \~550 \$.
* **Дети**: каждый ребёнок +475 \$.
* Пол и регион влияют умеренно; возраст в линейной форме незначим после учёта остальных факторов.
* Модель удовлетворяет предпосылкам Гаусса–Маркова после корректировок и демонстрирует лучшую обобщающую способность по AIC/BIC.
